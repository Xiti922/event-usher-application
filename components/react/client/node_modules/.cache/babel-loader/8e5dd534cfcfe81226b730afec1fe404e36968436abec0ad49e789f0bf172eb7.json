{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createGovAminoConverters = exports.isAminoMsgDeposit = exports.isAminoMsgVoteWeighted = exports.isAminoMsgVote = exports.isAminoMsgSubmitProposal = void 0;\nconst math_1 = require(\"@cosmjs/math\");\nconst utils_1 = require(\"@cosmjs/utils\");\nconst gov_1 = require(\"cosmjs-types/cosmos/gov/v1beta1/gov\");\nconst any_1 = require(\"cosmjs-types/google/protobuf/any\");\nconst long_1 = __importDefault(require(\"long\"));\nconst queryclient_1 = require(\"../../queryclient\");\nfunction isAminoMsgSubmitProposal(msg) {\n  return msg.type === \"cosmos-sdk/MsgSubmitProposal\";\n}\nexports.isAminoMsgSubmitProposal = isAminoMsgSubmitProposal;\nfunction isAminoMsgVote(msg) {\n  return msg.type === \"cosmos-sdk/MsgVote\";\n}\nexports.isAminoMsgVote = isAminoMsgVote;\nfunction isAminoMsgVoteWeighted(msg) {\n  return msg.type === \"cosmos-sdk/MsgVoteWeighted\";\n}\nexports.isAminoMsgVoteWeighted = isAminoMsgVoteWeighted;\nfunction isAminoMsgDeposit(msg) {\n  return msg.type === \"cosmos-sdk/MsgDeposit\";\n}\nexports.isAminoMsgDeposit = isAminoMsgDeposit;\nfunction createGovAminoConverters() {\n  return {\n    \"/cosmos.gov.v1beta1.MsgDeposit\": {\n      aminoType: \"cosmos-sdk/MsgDeposit\",\n      toAmino: _ref => {\n        let {\n          amount,\n          depositor,\n          proposalId\n        } = _ref;\n        return {\n          amount,\n          depositor,\n          proposal_id: proposalId.toString()\n        };\n      },\n      fromAmino: _ref2 => {\n        let {\n          amount,\n          depositor,\n          proposal_id\n        } = _ref2;\n        return {\n          amount: Array.from(amount),\n          depositor,\n          proposalId: long_1.default.fromString(proposal_id)\n        };\n      }\n    },\n    \"/cosmos.gov.v1beta1.MsgVote\": {\n      aminoType: \"cosmos-sdk/MsgVote\",\n      toAmino: _ref3 => {\n        let {\n          option,\n          proposalId,\n          voter\n        } = _ref3;\n        return {\n          option: option,\n          proposal_id: proposalId.toString(),\n          voter: voter\n        };\n      },\n      fromAmino: _ref4 => {\n        let {\n          option,\n          proposal_id,\n          voter\n        } = _ref4;\n        return {\n          option: (0, gov_1.voteOptionFromJSON)(option),\n          proposalId: long_1.default.fromString(proposal_id),\n          voter: voter\n        };\n      }\n    },\n    \"/cosmos.gov.v1beta1.MsgVoteWeighted\": {\n      aminoType: \"cosmos-sdk/MsgVoteWeighted\",\n      toAmino: _ref5 => {\n        let {\n          options,\n          proposalId,\n          voter\n        } = _ref5;\n        return {\n          options: options.map(o => ({\n            option: o.option,\n            // Weight is between 0 and 1, so we always have 20 characters when printing all trailing\n            // zeros (e.g. \"0.700000000000000000\" or \"1.000000000000000000\")\n            weight: (0, queryclient_1.decodeCosmosSdkDecFromProto)(o.weight).toString().padEnd(20, \"0\")\n          })),\n          proposal_id: proposalId.toString(),\n          voter: voter\n        };\n      },\n      fromAmino: _ref6 => {\n        let {\n          options,\n          proposal_id,\n          voter\n        } = _ref6;\n        return {\n          proposalId: long_1.default.fromString(proposal_id),\n          voter: voter,\n          options: options.map(o => ({\n            option: (0, gov_1.voteOptionFromJSON)(o.option),\n            weight: math_1.Decimal.fromUserInput(o.weight, 18).atomics\n          }))\n        };\n      }\n    },\n    \"/cosmos.gov.v1beta1.MsgSubmitProposal\": {\n      aminoType: \"cosmos-sdk/MsgSubmitProposal\",\n      toAmino: _ref7 => {\n        let {\n          initialDeposit,\n          proposer,\n          content\n        } = _ref7;\n        (0, utils_1.assertDefinedAndNotNull)(content);\n        let proposal;\n        switch (content.typeUrl) {\n          case \"/cosmos.gov.v1beta1.TextProposal\":\n            {\n              const textProposal = gov_1.TextProposal.decode(content.value);\n              proposal = {\n                type: \"cosmos-sdk/TextProposal\",\n                value: {\n                  description: textProposal.description,\n                  title: textProposal.title\n                }\n              };\n              break;\n            }\n          default:\n            throw new Error(`Unsupported proposal type: '${content.typeUrl}'`);\n        }\n        return {\n          initial_deposit: initialDeposit,\n          proposer: proposer,\n          content: proposal\n        };\n      },\n      fromAmino: _ref8 => {\n        let {\n          initial_deposit,\n          proposer,\n          content\n        } = _ref8;\n        let any_content;\n        switch (content.type) {\n          case \"cosmos-sdk/TextProposal\":\n            {\n              const {\n                value\n              } = content;\n              (0, utils_1.assert)((0, utils_1.isNonNullObject)(value));\n              const {\n                title,\n                description\n              } = value;\n              (0, utils_1.assert)(typeof title === \"string\");\n              (0, utils_1.assert)(typeof description === \"string\");\n              any_content = any_1.Any.fromPartial({\n                typeUrl: \"/cosmos.gov.v1beta1.TextProposal\",\n                value: gov_1.TextProposal.encode(gov_1.TextProposal.fromPartial({\n                  title: title,\n                  description: description\n                })).finish()\n              });\n              break;\n            }\n          default:\n            throw new Error(`Unsupported proposal type: '${content.type}'`);\n        }\n        return {\n          initialDeposit: Array.from(initial_deposit),\n          proposer: proposer,\n          content: any_content\n        };\n      }\n    }\n  };\n}\nexports.createGovAminoConverters = createGovAminoConverters;","map":{"version":3,"mappings":"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","names":["isAminoMsgSubmitProposal","msg","type","exports","isAminoMsgVote","isAminoMsgVoteWeighted","isAminoMsgDeposit","createGovAminoConverters","aminoType","toAmino","amount","depositor","proposalId","proposal_id","toString","fromAmino","Array","from","long_1","fromString","option","voter","options","map","o","weight","padEnd","math_1","fromUserInput","atomics","initialDeposit","proposer","content","proposal","typeUrl","textProposal","gov_1","decode","value","description","title","Error","initial_deposit","any_content","any_1","fromPartial","encode","finish"],"sources":["../../../src/modules/gov/aminomessages.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}