{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pubkeyToAddress = exports.rawSecp256k1PubkeyToAddress = void 0;\nconst crypto_1 = require(\"@cosmjs/crypto\");\nconst encoding_1 = require(\"@cosmjs/encoding\");\nconst types_1 = require(\"./types\");\nfunction rawSecp256k1PubkeyToAddress(pubkeyRaw, prefix) {\n  if (pubkeyRaw.length !== 33) {\n    throw new Error(`Invalid Secp256k1 pubkey length (compressed): ${pubkeyRaw.length}`);\n  }\n  const hash1 = crypto_1.sha256(pubkeyRaw);\n  const hash2 = crypto_1.ripemd160(hash1);\n  return encoding_1.Bech32.encode(prefix, hash2);\n}\nexports.rawSecp256k1PubkeyToAddress = rawSecp256k1PubkeyToAddress;\n// See https://github.com/tendermint/tendermint/blob/f2ada0a604b4c0763bda2f64fac53d506d3beca7/docs/spec/blockchain/encoding.md#public-key-cryptography\n// This assumes we already have a cosmos-compressed pubkey\nfunction pubkeyToAddress(pubkey, prefix) {\n  const pubkeyBytes = encoding_1.fromBase64(pubkey.value);\n  switch (pubkey.type) {\n    case types_1.pubkeyType.secp256k1:\n      {\n        return rawSecp256k1PubkeyToAddress(pubkeyBytes, prefix);\n      }\n    case types_1.pubkeyType.ed25519:\n      {\n        if (pubkeyBytes.length !== 32) {\n          throw new Error(`Invalid Ed25519 pubkey length: ${pubkeyBytes.length}`);\n        }\n        const hash = crypto_1.sha256(pubkeyBytes);\n        return encoding_1.Bech32.encode(prefix, hash.slice(0, 20));\n      }\n    case types_1.pubkeyType.sr25519:\n      {\n        if (pubkeyBytes.length !== 32) {\n          throw new Error(`Invalid Sr25519 pubkey length: ${pubkeyBytes.length}`);\n        }\n        const hash = crypto_1.sha256(pubkeyBytes);\n        return encoding_1.Bech32.encode(prefix, hash.slice(0, 20));\n      }\n    default:\n      throw new Error(\"Unrecognized public key algorithm\");\n  }\n}\nexports.pubkeyToAddress = pubkeyToAddress;","map":{"version":3,"mappings":";;;;;;AAAA;AACA;AAEA;AAEA,SAAgBA,2BAA2B,CAACC,SAAqB,EAAEC,MAAc;EAC/E,IAAID,SAAS,CAACE,MAAM,KAAK,EAAE,EAAE;IAC3B,MAAM,IAAIC,KAAK,CAAC,iDAAiDH,SAAS,CAACE,MAAM,EAAE,CAAC;;EAEtF,MAAME,KAAK,GAAGC,eAAM,CAACL,SAAS,CAAC;EAC/B,MAAMM,KAAK,GAAGD,kBAAS,CAACD,KAAK,CAAC;EAC9B,OAAOG,iBAAM,CAACC,MAAM,CAACP,MAAM,EAAEK,KAAK,CAAC;AACrC;AAPAG;AASA;AACA;AACA,SAAgBC,eAAe,CAACC,MAAc,EAAEV,MAAc;EAC5D,MAAMW,WAAW,GAAGL,qBAAU,CAACI,MAAM,CAACE,KAAK,CAAC;EAC5C,QAAQF,MAAM,CAACG,IAAI;IACjB,KAAKC,kBAAU,CAACC,SAAS;MAAE;QACzB,OAAOjB,2BAA2B,CAACa,WAAW,EAAEX,MAAM,CAAC;;IAEzD,KAAKc,kBAAU,CAACE,OAAO;MAAE;QACvB,IAAIL,WAAW,CAACV,MAAM,KAAK,EAAE,EAAE;UAC7B,MAAM,IAAIC,KAAK,CAAC,kCAAkCS,WAAW,CAACV,MAAM,EAAE,CAAC;;QAEzE,MAAMgB,IAAI,GAAGb,eAAM,CAACO,WAAW,CAAC;QAChC,OAAOL,iBAAM,CAACC,MAAM,CAACP,MAAM,EAAEiB,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;;IAEjD,KAAKJ,kBAAU,CAACK,OAAO;MAAE;QACvB,IAAIR,WAAW,CAACV,MAAM,KAAK,EAAE,EAAE;UAC7B,MAAM,IAAIC,KAAK,CAAC,kCAAkCS,WAAW,CAACV,MAAM,EAAE,CAAC;;QAEzE,MAAMgB,IAAI,GAAGb,eAAM,CAACO,WAAW,CAAC;QAChC,OAAOL,iBAAM,CAACC,MAAM,CAACP,MAAM,EAAEiB,IAAI,CAACC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;;IAEjD;MACE,MAAM,IAAIhB,KAAK,CAAC,mCAAmC,CAAC;EAAC;AAE3D;AAvBAM","names":["rawSecp256k1PubkeyToAddress","pubkeyRaw","prefix","length","Error","hash1","crypto_1","hash2","encoding_1","encode","exports","pubkeyToAddress","pubkey","pubkeyBytes","value","type","types_1","secp256k1","ed25519","hash","slice","sr25519"],"sources":["../src/address.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}