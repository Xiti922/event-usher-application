{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.serializePathv1 = serializePathv1;\nexports.signSendChunkv1 = signSendChunkv1;\nexports.publicKeyv1 = publicKeyv1;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _common = require(\"./common\");\nfunction serializePathv1(path) {\n  if (path == null || path.length < 3) {\n    throw new Error(\"Invalid path.\");\n  }\n  if (path.length > 10) {\n    throw new Error(\"Invalid path. Length should be <= 10\");\n  }\n  var buf = Buffer.alloc(1 + 4 * path.length);\n  buf.writeUInt8(path.length, 0);\n  for (var i = 0; i < path.length; i += 1) {\n    var v = path[i];\n    if (i < 3) {\n      // eslint-disable-next-line no-bitwise\n      v |= 0x80000000; // Harden\n    }\n\n    buf.writeInt32LE(v, 1 + i * 4);\n  }\n  return buf;\n}\nfunction signSendChunkv1(_x, _x2, _x3, _x4) {\n  return _signSendChunkv.apply(this, arguments);\n}\nfunction _signSendChunkv() {\n  _signSendChunkv = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(app, chunkIdx, chunkNum, chunk) {\n    return _regenerator.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", app.transport.send(_common.CLA, _common.INS.SIGN_SECP256K1, chunkIdx, chunkNum, chunk, [_common.ERROR_CODE.NoError, 0x6984, 0x6a80]).then(function (response) {\n              var errorCodeData = response.slice(-2);\n              var returnCode = errorCodeData[0] * 256 + errorCodeData[1];\n              var errorMessage = (0, _common.errorCodeToString)(returnCode);\n              if (returnCode === 0x6a80 || returnCode === 0x6984) {\n                errorMessage = \"\".concat(errorMessage, \" : \").concat(response.slice(0, response.length - 2).toString(\"ascii\"));\n              }\n              var signature = null;\n              if (response.length > 2) {\n                signature = response.slice(0, response.length - 2);\n              }\n              return {\n                signature: signature,\n                return_code: returnCode,\n                error_message: errorMessage\n              };\n            }, _common.processErrorResponse));\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _signSendChunkv.apply(this, arguments);\n}\nfunction compressPublicKey(publicKey) {\n  if (publicKey.length !== 65) {\n    throw new Error(\"decompressed public key length should be 65 bytes\");\n  }\n  var y = publicKey.slice(33, 65); // eslint-disable-next-line no-bitwise\n\n  var z = Buffer.from([2 + (y[y.length - 1] & 1)]);\n  return Buffer.concat([z, publicKey.slice(1, 33)]);\n}\nfunction publicKeyv1(_x5, _x6) {\n  return _publicKeyv.apply(this, arguments);\n}\nfunction _publicKeyv() {\n  _publicKeyv = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(app, data) {\n    return _regenerator.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", app.transport.send(_common.CLA, _common.INS.INS_PUBLIC_KEY_SECP256K1, 0, 0, data, [_common.ERROR_CODE.NoError]).then(function (response) {\n              var errorCodeData = response.slice(-2);\n              var returnCode = errorCodeData[0] * 256 + errorCodeData[1];\n              var pk = Buffer.from(response.slice(0, 65));\n              return {\n                pk: pk,\n                compressed_pk: compressPublicKey(pk),\n                return_code: returnCode,\n                error_message: (0, _common.errorCodeToString)(returnCode)\n              };\n            }, _common.processErrorResponse));\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _publicKeyv.apply(this, arguments);\n}","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","serializePathv1","signSendChunkv1","publicKeyv1","_regenerator","_asyncToGenerator2","_common","path","length","Error","buf","Buffer","alloc","writeUInt8","i","v","writeInt32LE","_x","_x2","_x3","_x4","_signSendChunkv","apply","arguments","default","mark","_callee","app","chunkIdx","chunkNum","chunk","wrap","_callee$","_context","prev","next","abrupt","transport","send","CLA","INS","SIGN_SECP256K1","ERROR_CODE","NoError","then","response","errorCodeData","slice","returnCode","errorMessage","errorCodeToString","concat","toString","signature","return_code","error_message","processErrorResponse","stop","compressPublicKey","publicKey","y","z","from","_x5","_x6","_publicKeyv","_callee2","data","_callee2$","_context2","INS_PUBLIC_KEY_SECP256K1","pk","compressed_pk"],"sources":["/Users/seanwavy/Development/legends/event-usher-application/components/react/client/node_modules/ledger-cosmos-js/dist/helperV1.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.serializePathv1 = serializePathv1;\nexports.signSendChunkv1 = signSendChunkv1;\nexports.publicKeyv1 = publicKeyv1;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _common = require(\"./common\");\n\nfunction serializePathv1(path) {\n  if (path == null || path.length < 3) {\n    throw new Error(\"Invalid path.\");\n  }\n\n  if (path.length > 10) {\n    throw new Error(\"Invalid path. Length should be <= 10\");\n  }\n\n  var buf = Buffer.alloc(1 + 4 * path.length);\n  buf.writeUInt8(path.length, 0);\n\n  for (var i = 0; i < path.length; i += 1) {\n    var v = path[i];\n\n    if (i < 3) {\n      // eslint-disable-next-line no-bitwise\n      v |= 0x80000000; // Harden\n    }\n\n    buf.writeInt32LE(v, 1 + i * 4);\n  }\n\n  return buf;\n}\n\nfunction signSendChunkv1(_x, _x2, _x3, _x4) {\n  return _signSendChunkv.apply(this, arguments);\n}\n\nfunction _signSendChunkv() {\n  _signSendChunkv = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(app, chunkIdx, chunkNum, chunk) {\n    return _regenerator.default.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", app.transport.send(_common.CLA, _common.INS.SIGN_SECP256K1, chunkIdx, chunkNum, chunk, [_common.ERROR_CODE.NoError, 0x6984, 0x6a80]).then(function (response) {\n              var errorCodeData = response.slice(-2);\n              var returnCode = errorCodeData[0] * 256 + errorCodeData[1];\n              var errorMessage = (0, _common.errorCodeToString)(returnCode);\n\n              if (returnCode === 0x6a80 || returnCode === 0x6984) {\n                errorMessage = \"\".concat(errorMessage, \" : \").concat(response.slice(0, response.length - 2).toString(\"ascii\"));\n              }\n\n              var signature = null;\n\n              if (response.length > 2) {\n                signature = response.slice(0, response.length - 2);\n              }\n\n              return {\n                signature: signature,\n                return_code: returnCode,\n                error_message: errorMessage\n              };\n            }, _common.processErrorResponse));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _signSendChunkv.apply(this, arguments);\n}\n\nfunction compressPublicKey(publicKey) {\n  if (publicKey.length !== 65) {\n    throw new Error(\"decompressed public key length should be 65 bytes\");\n  }\n\n  var y = publicKey.slice(33, 65); // eslint-disable-next-line no-bitwise\n\n  var z = Buffer.from([2 + (y[y.length - 1] & 1)]);\n  return Buffer.concat([z, publicKey.slice(1, 33)]);\n}\n\nfunction publicKeyv1(_x5, _x6) {\n  return _publicKeyv.apply(this, arguments);\n}\n\nfunction _publicKeyv() {\n  _publicKeyv = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(app, data) {\n    return _regenerator.default.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", app.transport.send(_common.CLA, _common.INS.INS_PUBLIC_KEY_SECP256K1, 0, 0, data, [_common.ERROR_CODE.NoError]).then(function (response) {\n              var errorCodeData = response.slice(-2);\n              var returnCode = errorCodeData[0] * 256 + errorCodeData[1];\n              var pk = Buffer.from(response.slice(0, 65));\n              return {\n                pk: pk,\n                compressed_pk: compressPublicKey(pk),\n                return_code: returnCode,\n                error_message: (0, _common.errorCodeToString)(returnCode)\n              };\n            }, _common.processErrorResponse));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _publicKeyv.apply(this, arguments);\n}"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}