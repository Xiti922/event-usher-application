{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WalletConnectModal = void 0;\nconst tslib_1 = require(\"tslib\");\nconst browser_utils_1 = require(\"@walletconnect/browser-utils\");\nconst qrcode_react_1 = tslib_1.__importDefault(require(\"qrcode.react\"));\nconst react_1 = tslib_1.__importStar(require(\"react\"));\nconst BaseModal_1 = require(\"./BaseModal\");\nconst IOS_KEPLR_MOBILE_URL = \"itms-apps://itunes.apple.com/app/1567851089\";\nconst WalletConnectModal = _a => {\n  var {\n      isOpen,\n      uri,\n      classNames,\n      reset\n    } = _a,\n    props = tslib_1.__rest(_a, [\"isOpen\", \"uri\", \"classNames\", \"reset\"]);\n  const isMobile = (0, react_1.useMemo)(() => (0, browser_utils_1.isMobile)(), []);\n  const isAndroid = (0, react_1.useMemo)(() => (0, browser_utils_1.isAndroid)(), []);\n  // Defined if isMobile is true.\n  const navigateToAppURL = (0, react_1.useMemo)(() => isMobile ? isAndroid ? `intent://wcV1?${uri}#Intent;package=com.chainapsis.keplr;scheme=keplrwallet;end;` : `keplrwallet://wcV1?${uri}` : undefined, [isMobile, isAndroid, uri]);\n  // Open app if mobile URL is available.\n  (0, react_1.useEffect)(() => {\n    if (!isOpen || !navigateToAppURL) return;\n    // Slight delay so they can read the modal.\n    const timeout = setTimeout(() => {\n      window.location.href = navigateToAppURL;\n    }, 2000);\n    return () => clearTimeout(timeout);\n  }, [navigateToAppURL, isOpen]);\n  const [qrShowing, setQrShowing] = (0, react_1.useState)(!isMobile);\n  // Show mobile help if timeout is reached.\n  const [showMobileHelp, setShowMobileHelp] = (0, react_1.useState)(false);\n  (0, react_1.useEffect)(() => {\n    if (!isMobile || !isOpen) {\n      setShowMobileHelp(false);\n      return;\n    }\n    const timeout = setTimeout(() => setShowMobileHelp(true), 5000);\n    return () => clearTimeout(timeout);\n  }, [isOpen, isMobile, setShowMobileHelp]);\n  return react_1.default.createElement(BaseModal_1.BaseModal, Object.assign({\n    classNames: classNames,\n    isOpen: isOpen,\n    maxWidth: \"24rem\",\n    title: isMobile ? \"Connect to Mobile Wallet\" : \"Scan QR Code\"\n  }, props), !!navigateToAppURL && react_1.default.createElement(react_1.default.Fragment, null, react_1.default.createElement(\"p\", {\n    className: classNames === null || classNames === void 0 ? void 0 : classNames.textContent,\n    style: {\n      marginBottom: \"1rem\"\n    }\n  }, react_1.default.createElement(\"a\", {\n    href: navigateToAppURL,\n    style: {\n      textDecoration: \"underline\"\n    }\n  }, \"Open your mobile wallet\"), \" \", \"and accept the connection request.\"), react_1.default.createElement(\"p\", {\n    className: classNames === null || classNames === void 0 ? void 0 : classNames.textContent,\n    style: {\n      marginBottom: showMobileHelp ? \"1rem\" : \"1.5rem\"\n    }\n  }, \"If you don't have Keplr Mobile installed,\", \" \", react_1.default.createElement(\"a\", {\n    href: isAndroid ? navigateToAppURL : IOS_KEPLR_MOBILE_URL,\n    style: {\n      textDecoration: \"underline\"\n    }\n  }, \"click here to install it\"), \". You can also scan the QR code at the bottom from another device with Keplr Mobile installed.\"), showMobileHelp && react_1.default.createElement(\"p\", {\n    className: classNames === null || classNames === void 0 ? void 0 : classNames.textContent,\n    style: {\n      marginBottom: \"1.5rem\"\n    }\n  }, \"If nothing shows up in your mobile wallet, or nothing happened once you accepted,\", \" \", react_1.default.createElement(\"button\", {\n    onClick: reset,\n    style: {\n      textDecoration: \"underline\",\n      display: \"inline\"\n    }\n  }, \"click here to reset\"), \" \", \"and try connecting again. Refresh the page if the problem persists.\"), react_1.default.createElement(\"button\", {\n    onClick: () => setQrShowing(s => !s),\n    style: {\n      textAlign: \"left\"\n    }\n  }, react_1.default.createElement(BaseModal_1.ModalSubheader, {\n    className: classNames === null || classNames === void 0 ? void 0 : classNames.modalSubheader,\n    style: {\n      marginBottom: qrShowing ? \"1rem\" : 0,\n      textDecoration: \"underline\"\n    }\n  }, qrShowing ? \"Hide\" : \"Show\", \" QR Code\"))), !!uri && qrShowing && react_1.default.createElement(qrcode_react_1.default, {\n    size: 500,\n    style: {\n      width: \"100%\",\n      height: \"100%\"\n    },\n    value: uri\n  }));\n};\nexports.WalletConnectModal = WalletConnectModal;","map":{"version":3,"mappings":"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","names":["IOS_KEPLR_MOBILE_URL","WalletConnectModal","_a","isOpen","uri","classNames","reset","props","isMobile","isAndroid","navigateToAppURL","undefined","timeout","setTimeout","window","location","href","clearTimeout","qrShowing","setQrShowing","showMobileHelp","setShowMobileHelp","react_1","BaseModal_1","maxWidth","title","className","textContent","style","marginBottom","textDecoration","onClick","display","s","textAlign","modalSubheader","qrcode_react_1","size","width","height","value","exports"],"sources":["../../../src/components/ui/WalletConnectModal.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}