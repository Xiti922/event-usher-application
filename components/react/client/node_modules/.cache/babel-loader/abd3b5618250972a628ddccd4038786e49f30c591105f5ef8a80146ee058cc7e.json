{"ast":null,"code":"\"use strict\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PermissionStore = exports.BasicAccessPermissionInnerStore = exports.Secret20ViewingKeyPermissionInnerStore = void 0;\nconst background_1 = require(\"@keplr-wallet/background\");\nconst mobx_1 = require(\"mobx\");\nconst common_1 = require(\"../../common\");\nconst router_1 = require(\"@keplr-wallet/router\");\nconst common_2 = require(\"@keplr-wallet/common\");\nclass Secret20ViewingKeyPermissionInnerStore {\n  constructor(chainId, contractAddress, requester) {\n    this.chainId = chainId;\n    this.contractAddress = contractAddress;\n    this.requester = requester;\n    this._origins = [];\n    mobx_1.makeObservable(this);\n    this.refreshOrigins();\n  }\n  get origins() {\n    return this._origins;\n  }\n  *removeOrigin(origin) {\n    yield this.requester.sendMessage(router_1.BACKGROUND_PORT, new background_1.RemovePermissionOrigin(this.chainId, background_1.getSecret20ViewingKeyPermissionType(this.contractAddress), origin));\n    yield this.refreshOrigins();\n  }\n  *refreshOrigins() {\n    this._origins = yield* common_2.toGenerator(this.requester.sendMessage(router_1.BACKGROUND_PORT, new background_1.GetPermissionOriginsMsg(this.chainId, background_1.getSecret20ViewingKeyPermissionType(this.contractAddress))));\n  }\n}\n__decorate([mobx_1.observable.ref], Secret20ViewingKeyPermissionInnerStore.prototype, \"_origins\", void 0);\n__decorate([mobx_1.flow], Secret20ViewingKeyPermissionInnerStore.prototype, \"removeOrigin\", null);\n__decorate([mobx_1.flow], Secret20ViewingKeyPermissionInnerStore.prototype, \"refreshOrigins\", null);\nexports.Secret20ViewingKeyPermissionInnerStore = Secret20ViewingKeyPermissionInnerStore;\nclass BasicAccessPermissionInnerStore {\n  constructor(chainId, requester) {\n    this.chainId = chainId;\n    this.requester = requester;\n    this._origins = [];\n    mobx_1.makeObservable(this);\n    this.refreshOrigins();\n  }\n  get origins() {\n    return this._origins;\n  }\n  *addOrigin(origin) {\n    yield this.requester.sendMessage(router_1.BACKGROUND_PORT, new background_1.AddPermissionOrigin(this.chainId, background_1.getBasicAccessPermissionType(), origin));\n    yield this.refreshOrigins();\n  }\n  *removeOrigin(origin) {\n    yield this.requester.sendMessage(router_1.BACKGROUND_PORT, new background_1.RemovePermissionOrigin(this.chainId, background_1.getBasicAccessPermissionType(), origin));\n    yield this.refreshOrigins();\n  }\n  *refreshOrigins() {\n    this._origins = yield* common_2.toGenerator(this.requester.sendMessage(router_1.BACKGROUND_PORT, new background_1.GetPermissionOriginsMsg(this.chainId, background_1.getBasicAccessPermissionType())));\n  }\n}\n__decorate([mobx_1.observable.ref], BasicAccessPermissionInnerStore.prototype, \"_origins\", void 0);\n__decorate([mobx_1.flow], BasicAccessPermissionInnerStore.prototype, \"addOrigin\", null);\n__decorate([mobx_1.flow], BasicAccessPermissionInnerStore.prototype, \"removeOrigin\", null);\n__decorate([mobx_1.flow], BasicAccessPermissionInnerStore.prototype, \"refreshOrigins\", null);\nexports.BasicAccessPermissionInnerStore = BasicAccessPermissionInnerStore;\nclass PermissionStore extends common_1.HasMapStore {\n  constructor(interactionStore, requester) {\n    super(key => {\n      const data = JSON.parse(key);\n      if (data.type === \"basicAccess\") {\n        return new BasicAccessPermissionInnerStore(data.chainId, this.requester);\n      } else {\n        return new Secret20ViewingKeyPermissionInnerStore(data.chainId, data.contractAddress, this.requester);\n      }\n    });\n    this.interactionStore = interactionStore;\n    this.requester = requester;\n    this._isLoading = false;\n    mobx_1.makeObservable(this);\n  }\n  getBasicAccessInfo(chainId) {\n    const key = JSON.stringify({\n      type: \"basicAccess\",\n      chainId,\n      contractAddress: \"\"\n    });\n    return this.get(key);\n  }\n  getOriginPermittedChains(origin, type) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return yield this.requester.sendMessage(router_1.BACKGROUND_PORT, new background_1.GetOriginPermittedChainsMsg(origin, type));\n    });\n  }\n  getSecret20ViewingKeyAccessInfo(chainId, contractAddress) {\n    const key = JSON.stringify({\n      type: \"viewingKey\",\n      chainId,\n      contractAddress\n    });\n    return this.get(key);\n  }\n  get waitingBasicAccessPermissions() {\n    const datas = this.waitingDatas;\n    const result = [];\n    for (const data of datas) {\n      if (background_1.isBasicAccessPermissionType(data.data.type)) {\n        result.push({\n          id: data.id,\n          data: {\n            chainIds: data.data.chainIds,\n            origins: data.data.origins\n          }\n        });\n      }\n    }\n    return result;\n  }\n  get waitingSecret20ViewingKeyAccessPermissions() {\n    const datas = this.waitingDatas;\n    const result = [];\n    for (const data of datas) {\n      if (background_1.isSecret20ViewingKeyPermissionType(data.data.type)) {\n        result.push({\n          id: data.id,\n          data: {\n            chainIds: data.data.chainIds,\n            contractAddress: background_1.splitSecret20ViewingKeyPermissionType(data.data.type),\n            origins: data.data.origins\n          }\n        });\n      }\n    }\n    return result;\n  }\n  get waitingDatas() {\n    return this.interactionStore.getDatas(background_1.INTERACTION_TYPE_PERMISSION);\n  }\n  *approve(id) {\n    this._isLoading = true;\n    try {\n      yield this.interactionStore.approve(background_1.INTERACTION_TYPE_PERMISSION, id, {});\n    } finally {\n      this._isLoading = false;\n    }\n  }\n  *reject(id) {\n    this._isLoading = true;\n    try {\n      yield this.interactionStore.reject(background_1.INTERACTION_TYPE_PERMISSION, id);\n    } finally {\n      this._isLoading = false;\n    }\n  }\n  *rejectAll() {\n    this._isLoading = true;\n    try {\n      yield this.interactionStore.rejectAll(background_1.INTERACTION_TYPE_PERMISSION);\n    } finally {\n      this._isLoading = false;\n    }\n  }\n  get isLoading() {\n    return this._isLoading;\n  }\n}\n__decorate([mobx_1.observable], PermissionStore.prototype, \"_isLoading\", void 0);\n__decorate([mobx_1.computed], PermissionStore.prototype, \"waitingBasicAccessPermissions\", null);\n__decorate([mobx_1.computed], PermissionStore.prototype, \"waitingSecret20ViewingKeyAccessPermissions\", null);\n__decorate([mobx_1.flow], PermissionStore.prototype, \"approve\", null);\n__decorate([mobx_1.flow], PermissionStore.prototype, \"reject\", null);\n__decorate([mobx_1.flow], PermissionStore.prototype, \"rejectAll\", null);\nexports.PermissionStore = PermissionStore;","map":{"version":3,"mappings":"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","names":["Secret20ViewingKeyPermissionInnerStore","constructor","chainId","contractAddress","requester","mobx_1","refreshOrigins","origins","_origins","removeOrigin","origin","sendMessage","router_1","background_1","common_2","__decorate","ref","exports","BasicAccessPermissionInnerStore","addOrigin","PermissionStore","common_1","interactionStore","key","data","JSON","parse","type","getBasicAccessInfo","stringify","get","getOriginPermittedChains","getSecret20ViewingKeyAccessInfo","waitingBasicAccessPermissions","datas","waitingDatas","result","push","id","chainIds","waitingSecret20ViewingKeyAccessPermissions","getDatas","approve","_isLoading","reject","rejectAll","isLoading"],"sources":["/Users/seanwavy/Development/legends/event-usher-application/components/react/client/node_modules/@keplr-wallet/stores/src/core/interaction/permission.ts"],"sourcesContent":["import { InteractionStore } from \"./interaction\";\nimport {\n  getBasicAccessPermissionType,\n  GetPermissionOriginsMsg,\n  INTERACTION_TYPE_PERMISSION,\n  isBasicAccessPermissionType,\n  PermissionData,\n  RemovePermissionOrigin,\n  isSecret20ViewingKeyPermissionType,\n  splitSecret20ViewingKeyPermissionType,\n  getSecret20ViewingKeyPermissionType,\n  AddPermissionOrigin,\n  GetOriginPermittedChainsMsg,\n} from \"@keplr-wallet/background\";\nimport { computed, flow, makeObservable, observable } from \"mobx\";\nimport { HasMapStore } from \"../../common\";\nimport { BACKGROUND_PORT, MessageRequester } from \"@keplr-wallet/router\";\nimport { toGenerator } from \"@keplr-wallet/common\";\n\nexport class Secret20ViewingKeyPermissionInnerStore {\n  @observable.ref\n  protected _origins: string[] = [];\n\n  constructor(\n    protected readonly chainId: string,\n    protected readonly contractAddress: string,\n    protected readonly requester: MessageRequester\n  ) {\n    makeObservable(this);\n\n    this.refreshOrigins();\n  }\n\n  get origins(): string[] {\n    return this._origins;\n  }\n\n  @flow\n  *removeOrigin(origin: string) {\n    yield this.requester.sendMessage(\n      BACKGROUND_PORT,\n      new RemovePermissionOrigin(\n        this.chainId,\n        getSecret20ViewingKeyPermissionType(this.contractAddress),\n        origin\n      )\n    );\n    yield this.refreshOrigins();\n  }\n\n  @flow\n  protected *refreshOrigins() {\n    this._origins = yield* toGenerator(\n      this.requester.sendMessage(\n        BACKGROUND_PORT,\n        new GetPermissionOriginsMsg(\n          this.chainId,\n          getSecret20ViewingKeyPermissionType(this.contractAddress)\n        )\n      )\n    );\n  }\n}\n\nexport class BasicAccessPermissionInnerStore {\n  @observable.ref\n  protected _origins: string[] = [];\n\n  constructor(\n    protected readonly chainId: string,\n    protected readonly requester: MessageRequester\n  ) {\n    makeObservable(this);\n\n    this.refreshOrigins();\n  }\n\n  get origins(): string[] {\n    return this._origins;\n  }\n\n  @flow\n  *addOrigin(origin: string) {\n    yield this.requester.sendMessage(\n      BACKGROUND_PORT,\n      new AddPermissionOrigin(\n        this.chainId,\n        getBasicAccessPermissionType(),\n        origin\n      )\n    );\n    yield this.refreshOrigins();\n  }\n\n  @flow\n  *removeOrigin(origin: string) {\n    yield this.requester.sendMessage(\n      BACKGROUND_PORT,\n      new RemovePermissionOrigin(\n        this.chainId,\n        getBasicAccessPermissionType(),\n        origin\n      )\n    );\n    yield this.refreshOrigins();\n  }\n\n  @flow\n  protected *refreshOrigins() {\n    this._origins = yield* toGenerator(\n      this.requester.sendMessage(\n        BACKGROUND_PORT,\n        new GetPermissionOriginsMsg(\n          this.chainId,\n          getBasicAccessPermissionType()\n        )\n      )\n    );\n  }\n}\n\ninterface MapKeyData {\n  type: \"basicAccess\" | \"viewingKey\";\n  chainId: string;\n  contractAddress: string;\n}\n\nexport class PermissionStore extends HasMapStore<\n  BasicAccessPermissionInnerStore | Secret20ViewingKeyPermissionInnerStore\n> {\n  @observable\n  protected _isLoading: boolean = false;\n\n  constructor(\n    protected readonly interactionStore: InteractionStore,\n    protected readonly requester: MessageRequester\n  ) {\n    super((key: string) => {\n      const data = JSON.parse(key) as MapKeyData;\n      if (data.type === \"basicAccess\") {\n        return new BasicAccessPermissionInnerStore(\n          data.chainId,\n          this.requester\n        );\n      } else {\n        return new Secret20ViewingKeyPermissionInnerStore(\n          data.chainId,\n          data.contractAddress,\n          this.requester\n        );\n      }\n    });\n    makeObservable(this);\n  }\n\n  getBasicAccessInfo(chainId: string): BasicAccessPermissionInnerStore {\n    const key = JSON.stringify({\n      type: \"basicAccess\",\n      chainId,\n      contractAddress: \"\",\n    });\n    return this.get(key) as BasicAccessPermissionInnerStore;\n  }\n\n  async getOriginPermittedChains(\n    origin: string,\n    type: string\n  ): Promise<string[]> {\n    return await this.requester.sendMessage(\n      BACKGROUND_PORT,\n      new GetOriginPermittedChainsMsg(origin, type)\n    );\n  }\n\n  getSecret20ViewingKeyAccessInfo(\n    chainId: string,\n    contractAddress: string\n  ): Secret20ViewingKeyPermissionInnerStore {\n    const key = JSON.stringify({\n      type: \"viewingKey\",\n      chainId,\n      contractAddress,\n    });\n    return this.get(key) as Secret20ViewingKeyPermissionInnerStore;\n  }\n\n  @computed\n  get waitingBasicAccessPermissions(): {\n    id: string;\n    data: {\n      chainIds: string[];\n      origins: string[];\n    };\n  }[] {\n    const datas = this.waitingDatas;\n\n    const result = [];\n    for (const data of datas) {\n      if (isBasicAccessPermissionType(data.data.type)) {\n        result.push({\n          id: data.id,\n          data: {\n            chainIds: data.data.chainIds,\n            origins: data.data.origins,\n          },\n        });\n      }\n    }\n\n    return result;\n  }\n\n  @computed\n  get waitingSecret20ViewingKeyAccessPermissions(): {\n    id: string;\n    data: {\n      chainIds: string[];\n      contractAddress: string;\n      origins: string[];\n    };\n  }[] {\n    const datas = this.waitingDatas;\n\n    const result = [];\n    for (const data of datas) {\n      if (isSecret20ViewingKeyPermissionType(data.data.type)) {\n        result.push({\n          id: data.id,\n          data: {\n            chainIds: data.data.chainIds,\n            contractAddress: splitSecret20ViewingKeyPermissionType(\n              data.data.type\n            ),\n            origins: data.data.origins,\n          },\n        });\n      }\n    }\n\n    return result;\n  }\n\n  get waitingDatas() {\n    return this.interactionStore.getDatas<PermissionData>(\n      INTERACTION_TYPE_PERMISSION\n    );\n  }\n\n  @flow\n  *approve(id: string) {\n    this._isLoading = true;\n    try {\n      yield this.interactionStore.approve(INTERACTION_TYPE_PERMISSION, id, {});\n    } finally {\n      this._isLoading = false;\n    }\n  }\n\n  @flow\n  *reject(id: string) {\n    this._isLoading = true;\n    try {\n      yield this.interactionStore.reject(INTERACTION_TYPE_PERMISSION, id);\n    } finally {\n      this._isLoading = false;\n    }\n  }\n\n  @flow\n  *rejectAll() {\n    this._isLoading = true;\n    try {\n      yield this.interactionStore.rejectAll(INTERACTION_TYPE_PERMISSION);\n    } finally {\n      this._isLoading = false;\n    }\n  }\n\n  get isLoading(): boolean {\n    return this._isLoading;\n  }\n}\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}