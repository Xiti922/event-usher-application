{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.pbkdf2Sha512 = exports.pbkdf2Sha512Noble = exports.pbkdf2Sha512Crypto = exports.pbkdf2Sha512Subtle = exports.getSubtle = exports.getCryptoModule = void 0;\nconst utils_1 = require(\"@cosmjs/utils\");\nconst pbkdf2_1 = require(\"@noble/hashes/pbkdf2\");\nconst sha512_1 = require(\"@noble/hashes/sha512\");\n/**\n * Returns the Node.js crypto module when available and `undefined`\n * otherwise.\n *\n * Detects an unimplemented fallback module from Webpack 5 and returns\n * `undefined` in that case.\n */\nasync function getCryptoModule() {\n  try {\n    const crypto = await Promise.resolve().then(() => __importStar(require(\"crypto\")));\n    // We get `Object{default: Object{}}` as a fallback when using\n    // `crypto: false` in Webpack 5, which we interprete as unavailable.\n    if (typeof crypto === \"object\" && Object.keys(crypto).length <= 1) {\n      return undefined;\n    }\n    return crypto;\n  } catch (_a) {\n    return undefined;\n  }\n}\nexports.getCryptoModule = getCryptoModule;\nasync function getSubtle() {\n  const g = globalThis;\n  let subtle = g.crypto && g.crypto.subtle;\n  if (!subtle) {\n    const crypto = await getCryptoModule();\n    if (crypto && crypto.webcrypto && crypto.webcrypto.subtle) {\n      subtle = crypto.webcrypto.subtle;\n    }\n  }\n  return subtle;\n}\nexports.getSubtle = getSubtle;\nasync function pbkdf2Sha512Subtle(\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nsubtle, secret, salt, iterations, keylen) {\n  (0, utils_1.assert)(subtle, \"Argument subtle is falsy\");\n  (0, utils_1.assert)(typeof subtle === \"object\", \"Argument subtle is not of type object\");\n  (0, utils_1.assert)(typeof subtle.importKey === \"function\", \"subtle.importKey is not a function\");\n  (0, utils_1.assert)(typeof subtle.deriveBits === \"function\", \"subtle.deriveBits is not a function\");\n  return subtle.importKey(\"raw\", secret, {\n    name: \"PBKDF2\"\n  }, false, [\"deriveBits\"]).then(key => subtle.deriveBits({\n    name: \"PBKDF2\",\n    salt: salt,\n    iterations: iterations,\n    hash: {\n      name: \"SHA-512\"\n    }\n  }, key, keylen * 8).then(buffer => new Uint8Array(buffer)));\n}\nexports.pbkdf2Sha512Subtle = pbkdf2Sha512Subtle;\nasync function pbkdf2Sha512Crypto(\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\ncrypto, secret, salt, iterations, keylen) {\n  (0, utils_1.assert)(crypto, \"Argument crypto is falsy\");\n  (0, utils_1.assert)(typeof crypto === \"object\", \"Argument crypto is not of type object\");\n  (0, utils_1.assert)(typeof crypto.pbkdf2 === \"function\", \"crypto.pbkdf2 is not a function\");\n  return new Promise((resolve, reject) => {\n    crypto.pbkdf2(secret, salt, iterations, keylen, \"sha512\", (error, result) => {\n      if (error) {\n        reject(error);\n      } else {\n        resolve(Uint8Array.from(result));\n      }\n    });\n  });\n}\nexports.pbkdf2Sha512Crypto = pbkdf2Sha512Crypto;\nasync function pbkdf2Sha512Noble(secret, salt, iterations, keylen) {\n  return (0, pbkdf2_1.pbkdf2Async)(sha512_1.sha512, secret, salt, {\n    c: iterations,\n    dkLen: keylen\n  });\n}\nexports.pbkdf2Sha512Noble = pbkdf2Sha512Noble;\n/**\n * A pbkdf2 implementation for BIP39. This is not exported at package level and thus a private API.\n */\nasync function pbkdf2Sha512(secret, salt, iterations, keylen) {\n  const subtle = await getSubtle();\n  if (subtle) {\n    return pbkdf2Sha512Subtle(subtle, secret, salt, iterations, keylen);\n  } else {\n    const crypto = await getCryptoModule();\n    if (crypto) {\n      return pbkdf2Sha512Crypto(crypto, secret, salt, iterations, keylen);\n    } else {\n      return pbkdf2Sha512Noble(secret, salt, iterations, keylen);\n    }\n  }\n}\nexports.pbkdf2Sha512 = pbkdf2Sha512;","map":{"version":3,"mappings":"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","names":["getCryptoModule","crypto","Object","keys","length","undefined","exports","getSubtle","g","globalThis","subtle","webcrypto","pbkdf2Sha512Subtle","secret","salt","iterations","keylen","importKey","deriveBits","name","then","key","hash","buffer","Uint8Array","pbkdf2Sha512Crypto","pbkdf2","Promise","resolve","reject","error","result","from","pbkdf2Sha512Noble","sha512_1","c","dkLen","pbkdf2Sha512"],"sources":["../src/pbkdf2.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script","externalDependencies":[]}